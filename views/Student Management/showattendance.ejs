<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        table {
            border-collapse: collapse;
            margin: auto;
        }

        td,
        tr,
        th {
            padding: 10px;
        }

        .viewmore-btn {
            padding: 10px;
            background-color: cadetblue;
            color: white;
            font-size: larger;
            border: 0px;
            border-radius: 8px;
            margin: 0 10px;
        }

        .edit-btn {
            padding: 10px;
            background-color: green;
            color: white;
            font-size: larger;
            border: 0px;
            border-radius: 8px;
            text-decoration: none;
            margin: 0 10px;
        }

        .delete-btn {
            padding: 10px;
            background-color: red;
            color: white;
            font-size: larger;
            margin: 0 10px;
            border: 0px;
            border-radius: 8px;
            text-decoration: none;
        }

        .btn-group {
            display: flex;
        }

        .page-component {
            margin: 10px 0;
        }

        .row {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 15px;
            text-align: center;
        }

        .col-5 {
            width: 80px;
            padding: 10px;
        }

        .btn {
            background-color: transparent;
            padding: 10px;
            border-radius: 10px;
            font-family: bold;
            font-size: larger;
        }

        a {
            color: black;
            text-decoration: none;
        }
        select {
            padding: 7px;
            font-weight: bold;
        }
        form{
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
        }
    </style>
</head>

<body>
    <h1 style="text-align: center;">Show All Students</h1>

    <form action="">
        Attendance Filter: 
        <select name="month_filter" id="month_filter" onchange="getFilter(this)">
            <option value="12" <%=(month == 12) ? 'selected': ''%>>December 2023</option>
            <option value="1" <%=(month == 1) ? 'selected': ''%>>January 2024</option>
            <option value="2" <%=(month == 2) ? 'selected': ''%>>February 2024</option>
        </select>
        <p id="data"></p>
    </form>

    <table border="1px solid black">
        <tr>
            <th>Id</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Present Days</th>
            <th>Attendance Percentage</th>
        </tr>
        <% result.forEach(function(student) { %>
            <tr>
                <td>
                    <%= student.id %>
                </td>
                <td>
                    <%= student.fname %>
                </td>
                <td>
                    <%= student.lname %>
                </td>
                <td>
                    <%= student.PRESENT_DAYS %>
                </td>
                <td>
                    <%= student.ATTENDANCE_PER %>
                </td>
            </tr>
            <% }); %>
    </table>
    <%- include('paginationcomponent') -%>
    <script>
        const getFilter = (month) => {
            document.getElementById('data').innerHTML = month.value;
            location.href = `http://localhost:8000/showattendance?month=${month.value}`;
            //fetch("http://localhost:8000/showattendance", {
              //  method: 'POST',
               // headers: {
                   // 'Content-Type': "application/json; charset=UTF-8"
                //},
                //body: JSON.stringify({ month: month.value }),
            //}).then((data) => {
             //   data.text().then(function (html){
               //     document.querySelector('html').innerHTML = html;
              //  });
          //  }).catch(function (err){
            //   console.log('Failed to load Page: '+ err);
            //})
        }
    </script>
</body>

</html>